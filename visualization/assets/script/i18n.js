const translations = {
    'en': {
        'changeLanguageButton': 'ES', 
        "filters": "Filter",
        "year": "Year",
        "subject": "Subject",
        "all": "All",
        "biology": "Biology",
        "computer science": "Computer Science",
        "Physical-chemical-sciences": "Physical-chemical sciences",
        "visual-communication":"Visual Communication",
        "communication-and-society":"Communication and Society",
        "design":"Design",
        "Physical-education-and-recreation":"Physical Education and Recreation",
        "music-education": "Music Education",
        "training-for-citizenship":"Training for Citizenship",
        "physics": "Physics",
        "geography":"Geography",
        "history":"History",
        "spanish-language": "Spanish Language",
        "literature":"Literature",
        "mathematics": "Mathematics",
        "chemistry": "Chemistry",
        "health-and-sexuality":"Health and Sexuality",
        "technology":"Technology",
        "sort-by": "Sort by",
        "article":"article name",
        "publication": "publication date",
        "size":"article size",
        "discussion":"talk page size",
        "incipit": "introduction size",
        "issue":"number of alerts",
        "images":"number of images",
        "reference":"number of references",
        "how-to":"How to read the visualization",
        "how-to-paragraph-sentence1":"The visualization shows the articles that we identify as related to the curriculum of the third cycle of integrated basic education of Uruguay.",
        "how-to-paragraph-sentence2":"The size of the article, talk page, and introduction are expressed in bytes. The light colored circle represents the size of the article, the dark circle represents the size of the introduction, and the circumference with just the outline represents the size of the talk page.",
        "how-to-paragraph-sentence3":"The vertical axis, that is, the height of the point on the graph, represents the average number of daily visits during the year analyzed. Dashed lines indicate average daily visits in the previous year.",
        "how-to-paragraph-sentence4":"In the menu above you can choose a subject and the order of the articles on the horizontal axis. Hover over the circle to see more information, and click to go to the Wikipedia article.",
        "img_a":"assets/img/dv1_legend_a_en.svg",
        "img_b":"assets/img/dv1_legend_b_en.svg",
        "data":"Data",
        "curriculum-sentenc1":"The third cycle school curriculum is",
        "curriculum-sentenc2":"modeled on Wikidata",
        "curriculum-sentenc3":"You can browse the curriculum on Wikidata and access the complete list of topics that make up each program:",
        "grade-7":"Seventh grade",
        "grade-8":"Eighth grade",
        "grade-9":"Ninth grade",
        "query-paragraph":"Here are some queries in Wikidata Query Service that may be of interest to you:",
        "curriculum-link": "Complete list of curriculum topics",
        "no-article":"Topics that do not yet have an article on Wikipedia",
        "ghana-wikicuriculum":"Ghana's curriculum",
        "download-data":"Download the data",
        "credit":"Credits: Wikicurrícula Uy",
        "implementation":"Implementation",
        "fellow": "fellow in Wikidata and Open Data at",
        "curriculum-analysis-consulting":"Curriculum analysis consulting",
        "thank-teachers":"We thank the teachers:",
        "original-project-credits":"Original project credits:",
        "ideation-and-responsibility":"Ideation and responsibility",
        "Web-design-and-data-visualization":"Web design and data visualization",
        "workgroup":"Workgroup",
        "support-and-collaboration": "Support and collaboration"
    },

    'es': {
        'changeLanguageButton': 'EN',  
        "filters": "Filtros",
        "year": "Año",
        "subject": "Materia",
        "all": "Todas las asignaturas",
        "biology": "Biología",
        "computer science": "Ciencias de la computación",
        "Physical-chemical-sciences": "Ciencias físico-químicas",
        "visual-communication":"Comunicación visual",
        "communication-and-society":"Comunicación y sociedad",
        "design":"Diseño",
        "Physical-education-and-recreation":"Educación física y recreación",
        "music-education": "Educación musical",
        "training-for-citizenship":"Formación para la ciudadanía",
        "physics": "Física",
        "geography":"Geografía",
        "history":"Historia",
        "spanish-language": "Lengua española",
        "literature":"Literatura",
        "mathematics":"Matemática",
        "chemistry": "Química",
        "health-and-sexuality":"Taller de salud y sexualidad",
        "technology":"Tecnologías",
        "sort-by": "Ordenar por",
        "article":"nombre del artículo",
        "publication": "fecha de publicación",
        "size":"tamaño del artículo",
        "discussion":"tamaño de la página de discusión",
        "incipit": "tamaño de la introducción",
        "issue":"cantidad de plantillas",
        "images":"cantidad de imágenes",
        "reference":"cantidad de referencias",
        "how-to":"Cómo leer la visualización",
        "how-to-paragraph-sentence1":"La visualización muestra los artículos que identificamos como relacionados con la currícula del tercer ciclo de educación básica integrada (ex ciclo básico) de Uruguay.",
        "how-to-paragraph-sentence2":"El tamaño del artículo, de la página de discusión y de la introducción se expresan en bytes. El círculo de color claro representa el tamaño del artículo, el círculo oscuro representa el tamaño de la introducción y la circunferencia con solo el contorno representa el tamaño de la página de discusión.",
        "how-to-paragraph-sentence3":"El eje vertical, es decir la altura del punto en el gráfico, representa la cantidad de visitas diarias promedio durante el año analizado. Las líneas discontinuas indican las visitas diarias promedio en el año anterior.",
        "how-to-paragraph-sentence4":"En el menú de arriba puedes elegir una materia y el orden de los artículos en el eje horizontal. Pasa el cursor por encima del círculo para ver más información, y cliquea para ir al artículo en Wikipedia.",
        "img_a": "assets/img/dv1_legend_a_es.svg",
        "img_b": "assets/img/dv1_legend_b_es.svg",
        "data": "Datos",
        "curriculum-sentenc1":"La currícula escolar de tercer ciclo está",
        "curriculum-sentenc2":"modelada en Wikidata",
        "curriculum-sentenc3":"Puedes navegar la currícula en Wikidata y acceder a la lista completa de temas que componen cada programa:",
        "grade-7":"Séptimo grado",
        "grade-8":"Octavo grado",
        "grade-9":"Noveno grado",
        "query-paragraph":"Aquí hay algunas queries en Wikidata Query Service que pueden resultar de tu interés:",
        "curriculum-link": "Lista completa de temas de la currícula",
        "no-article":"Temas que aún no tienen artículo en Wikipedia",
        "ghana-wikicuriculum":"El plan de estudios de Ghana",
        "download-data":"Descarga los datos",
        "credit":"Créditos: Wikicurrícula Uy",
        "implementation":"Implementación",
        "fellow": " fellow en Wikidata y Datos Abiertos de",
        "curriculum-analysis-consulting":"Consultoría en análisis de la currícula",
        "thank-teachers":"Agradecemos a las y los docentes:",
        "original-project-credits":"Créditos del proyecto original",
        "ideation-and-responsibility":"Ideación y responsable",
        "Web-design-and-data-visualization":"Diseño web y visualización de datos",
        "workgroup":"Grupo de trabajo",
        "support-and-collaboration": "Soporte y colaboración"
    }
};

// Function to translate elements based on the current language
function translate(language) {
    // Iterate through all elements with the 'data-i18n' attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[language] && translations[language][key]) {
              if (element.tagName === 'IMG') {
                element.src = translations[language][key];
            } else {
                element.textContent = translations[language][key];
            }
        }
    });
}

// Function to update image sources based on the selected language
function updateImageSources(language) {
    const img_a = document.getElementById('img_a');
    const img_b = document.getElementById('img_b');

    // Use the language parameter to determine the correct image source
    img_a.src = translations[language]['img_a'];
    img_b.src = translations[language]['img_b'];
}

// Function to update the URL with the language parameter
function updateLanguageParameter(language) {
    const url = new URL(window.location.href);
    url.searchParams.set('lang', language);
    window.history.replaceState({}, '', url);
}

// Set initial language based on HTML lang attribute
const initialLanguage = document.documentElement.lang.toLowerCase();
translate(initialLanguage);
updateImageSources(initialLanguage);

// Event listener for language switch button
document.getElementById('changeLanguageButton').addEventListener('click', function() {
    // Toggle between 'en' and 'es'
    const newLanguage = (document.documentElement.lang.toLowerCase() === 'en') ? 'es' : 'en';
    document.documentElement.lang = newLanguage;
    translate(newLanguage);
    updateImageSources(newLanguage);
    updateLanguageParameter(newLanguage);
});
